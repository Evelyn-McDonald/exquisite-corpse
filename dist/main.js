var headSVG = '<svg id="Heads" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2000 2000"><defs><style>.cls-1{fill:none;}.cls-2{fill:#1a1a1d;}.cls-3{fill:#f08e81;}.cls-4{fill:#f6bf94;}.cls-5{fill:#e0705a;}.cls-6{fill:#312c2a;}.cls-7{clip-path:url(#clip-path);}</style><clipPath id="clip-path"><path class="cls-1" d="M1179.65,370.57a189.31,189.31,0,0,0,9.81-60.34c0-104.63-84.82-189.46-189.46-189.46S810.54,205.6,810.54,310.23a189.31,189.31,0,0,0,9.81,60.34Z"/></clipPath></defs><title>head_4</title><path class="cls-2" d="M1167.46,288.73H832.54C795.56,385,772.79,486.66,782.43,583h435.14C1227.21,486.66,1204.44,385,1167.46,288.73Z"/><path class="cls-3" d="M844.8,383h8a18.42,18.42,0,0,1,18.42,18.42v67.66a0,0,0,0,1,0,0H854.48A28.09,28.09,0,0,1,826.38,441V401.39A18.42,18.42,0,0,1,844.8,383Z"/><path class="cls-3" d="M1162.79,383h16.69a0,0,0,0,1,0,0v67.66a18.42,18.42,0,0,1-18.42,18.42h-8a18.42,18.42,0,0,1-18.42-18.42V411.07A28.09,28.09,0,0,1,1162.79,383Z" transform="translate(2314.17 852.03) rotate(-180)"/><path class="cls-4" d="M962,614.08h82.58c71-40.36,158.71-166.4,116.12-283.43H845.87C803.28,447.68,891,573.72,962,614.08Z"/><path class="cls-5" d="M1031.47,491.91H975.1l19.48,14.17a15.69,15.69,0,0,0,17.4,0Z"/><path class="cls-4" d="M1174.67,370.57H831.9V271.18a402.51,402.51,0,0,1,342.77,0Z"/><path class="cls-2" d="M894.64,406.78a25,25,0,0,1,50,0m167.29,0a25,25,0,0,0-50,0"/><path class="cls-3" d="M962.43,541.3h81.7a0,0,0,0,1,0,0V544a30.47,30.47,0,0,1-30.47,30.47H992.9A30.47,30.47,0,0,1,962.43,544v-2.7A0,0,0,0,1,962.43,541.3Z"/><path class="cls-5" d="M982.5,541.61h73.27s-21.73-18.54-35.41-18.54S982.5,541.61,982.5,541.61Z"/><path class="cls-5" d="M950.8,541.61h73.26s-21.73-18.54-35.41-18.54S950.8,541.61,950.8,541.61Z"/><path class="cls-4" d="M1016.75,562.4a25.65,25.65,0,0,0,18.67-8.12l12.23-13H958.92l12.23,13a25.65,25.65,0,0,0,18.67,8.12Z"/><path class="cls-6" d="M1179.65,370.57a189.31,189.31,0,0,0,9.81-60.34c0-104.63-84.82-189.46-189.46-189.46S810.54,205.6,810.54,310.23a189.31,189.31,0,0,0,9.81,60.34Z"/><path class="cls-4" d="M1038.11,375.61c.38-.15,1-.41,1.47-.64l1.58-.75c1.07-.51,2.13-1,3.19-1.6,2.13-1.09,4.23-2.28,6.32-3.49,4.16-2.46,8.23-5.11,12.16-8a131.91,131.91,0,0,0,21.67-19.5c1.64-1.81,3.15-3.72,4.68-5.62s2.94-3.9,4.26-6,2.6-4.14,3.87-6.24,2.36-4.31,3.34-6.57a88.67,88.67,0,0,0,7.85-28.57l1.58.06a92.07,92.07,0,0,1-4.73,30.37c-.76,2.49-1.78,4.87-2.72,7.31s-2.09,4.77-3.33,7.07-2.49,4.58-3.79,6.85-2.77,4.43-4.29,6.56a142.91,142.91,0,0,1-20.77,23.53q-5.81,5.32-12.12,10.09c-2.12,1.58-4.25,3.14-6.46,4.62-1.11.75-2.22,1.48-3.36,2.2l-1.73,1.07c-.62.37-1.14.69-1.9,1.11Z"/><g class="cls-7"><path class="cls-2" d="M904,375.61c.37-.15,1-.41,1.46-.64l1.59-.75c1.06-.51,2.13-1,3.19-1.6,2.12-1.09,4.23-2.28,6.31-3.49,4.17-2.46,8.24-5.11,12.17-8a131.85,131.85,0,0,0,21.66-19.5c1.64-1.81,3.15-3.72,4.68-5.62s3-3.9,4.26-6,2.6-4.14,3.88-6.24c1.12-2.17,2.36-4.31,3.33-6.57a88.41,88.41,0,0,0,7.85-28.57l1.58.06a92.07,92.07,0,0,1-4.73,30.37c-.75,2.49-1.78,4.87-2.71,7.31-1.08,2.36-2.1,4.77-3.33,7.07s-2.5,4.58-3.8,6.85-2.77,4.43-4.29,6.56a142,142,0,0,1-20.77,23.53q-5.81,5.32-12.12,10.09c-2.11,1.58-4.25,3.14-6.46,4.62-1.1.75-2.22,1.48-3.36,2.2l-1.73,1.07c-.61.37-1.14.69-1.9,1.11Z"/></g></svg>';


// Character name validation
var nameInput = $('#characterName');
var nameDiv = document.getElementById('characterNameVal');
// var nameDiv = $('#characterNameVal');
var revealBtn = $('#revealBtn');

revealBtn.css('background-color', '#2F90BA');
revealBtn.disabled = true;

nameInput.on('input', function(e) {
    if (e.target.value) {    
        revealBtn.css('background-color', '#4EC3F7');
        revealBtn.disabled = false;
    } else {
        revealBtn.css('background-color', '#2F90BA');
        revealBtn.disabled = true;
    }

    nameDiv.innerHTML = e.target.value;
});

revealBtn.click(function(e) {
    if (!nameInput.val()) e.stopPropagation();
});


var headReveal = document.getElementById('headReveal');
var torsoReveal = document.getElementById('torsoReveal');
var legsReveal = document.getElementById('legsReveal');

var headRevealWrapper = document.getElementById('headRevealWrapper');
// var animData = {
//     container: headRevealWrapper,
//     renderer: 'svg',
//     autoplay: true,
//     loop: true,
//     animationData : jsonAnim
// };
// bodymovin.loadAnimation(animData);


// Create hidden canvas
var canvas = document.getElementById('shareable-character');
var ctx = canvas.getContext("2d");

var img1 = new Image();
img1.onload = function() {
    ctx.drawImage(img1, 0, 0);
    var canvasToImg = canvas.toDataURL();

    $.ajax({
        url: 'https://hooks.zapier.com/hooks/catch/2805412/l0grn0/',
        data: {
            image: canvasToImg,
            fileName: 'papa3'
        },
        method: 'POST'
    })
}
img1.src = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(headSVG);
// var drawHead = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(headSVG);
// ctx.drawImage(drawHead, 0, 0);
// ctx.drawImage(torsoReveal, 0, 0);
// ctx.drawImage(legsReveal, 0, 0);



// $('#shareable-character').on('click', function() {
//     var link = document.createElement('a');
//     link.download = 'corpse.png';
//     link.href = canvas.toDataURL()
//     link.click();
// })


var revealWrapper = document.getElementById('buildWrapper');
// var revealWrapper = document.getElementById('revealWrapper');

